<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>App Review World | Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Firebase CDN -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{
    margin:0;
    font-family: Arial, sans-serif;
    background: radial-gradient(circle at top, #0f172a, #020617);
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    color:white;
}

/* LOGIN CARD */
.login-box{
    width:90%;
    max-width:300px;
    background: rgba(30,41,59,0.85);
    padding:18px;
    border-radius:16px;
    box-shadow: 
0 0 25px rgba(59,130,246,1),
0 0 50px rgba(59,130,246,0.6);
    backdrop-filter: blur(8px);
    text-align:center;
}

/* LOGO */
.logo img{
    width:75px;
    height:75px;
    border-radius:50%;
    box-shadow: 
0 0 25px rgba(59,130,246,1),
0 0 50px rgba(59,130,246,0.6);
    margin-bottom:12px;
}

/* TITLE */
.title{
    font-size:26px;
    font-weight:700;
    margin-bottom:4px;
}

.subtitle{
    font-size:13px;
    letter-spacing:1px;
    color:#93c5fd;
    margin-bottom:18px;
}

/* INPUT */
input{
    width:93%;
    height:34px;
    padding:6px 10px;
    margin-top:8px;
    border:none;
    border-radius:8px;
    background:#334155;
    color:white;
    font-size:14px;
}

input::placeholder{
    color:#cbd5e1;
}

input:focus{
    outline:none;
    box-shadow:0 0 8px rgba(59,130,246,0.7);
}

/* BUTTON */
button{
    width:100%;
    padding:12px;
    margin-top:18px;
    background: linear-gradient(135deg,#2563eb,#38bdf8);
    border:none;
    border-radius:10px;
    font-size:16px;
    font-weight:600;
    color:white;
    cursor:pointer;
}

button:hover{
    opacity:0.9;
}

/* LINK */
.link{
    margin-top:14px;
    font-size:14px;
    color:#93c5fd;
    cursor:pointer;
}

.link:hover{
    text-decoration:underline;
}
.value {
  color: #ffffff;
  font-weight: 600;
  animation: blink 1s infinite;
}

@keyframes blink {
  50% { opacity: 0.5; }
}
</style>
</head>

<body>

<div class="login-box">
    <div class="logo">
    <img src="logo.png" class="app-logo">
    <div class="title">Digital Wallet</div>
    <div class="subtitle">App Reviews World</div>
</div>

    <input id="email" type="email" placeholder="Enter Email">
    <input id="password" type="password" placeholder="Enter Password">

    <button onclick="login()">Login</button>

    <div class="msg" id="msg"></div>
    <div class="link" onclick="window.location.href='new-account.html'">
                      Create New Account</div>
</div>


<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDkCsI-cOUGQ0RtcMue_-7oRX1oTdJhFBs",
    authDomain: "app-review-world-wallet.firebaseapp.com",
    projectId: "app-review-world-wallet",
    storageBucket: "app-review-world-wallet.firebasestorage.app",
    messagingSenderId: "30544424851",
    appId: "1:30544424851:web:da491e3c816a145a2b8266",
    measurementId: "G-GPWDM1L7BT"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();
// ================= LOGIN FUNCTION =================
async function login() {

  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();
  const msg = document.getElementById("msg");

  if (!email || !password) {
    msg.innerText = "‚ùå Please enter email and password";
    return;
  }

  try {
    // Firebase Login
    const res = await auth.signInWithEmailAndPassword(email, password);
    const user = res.user;

    // üîç Check if Admin in Firestore
    const adminSnap = await db.collection("admins").doc(user.uid).get();

    if (adminSnap.exists) {
      msg.innerText = "‚úÖ Admin Login Successful";
      setTimeout(() => {
        window.location.href = "admin.html";
      }, 1000);
    } else {
      msg.innerText = "‚úÖ Login Successful";
      setTimeout(() => {
        window.location.href = "dashboard.html";
      }, 1000);
    }

  } catch (error) {
    msg.innerText = "‚ùå " + error.message;
  }
}
</script>

</body>
</html>